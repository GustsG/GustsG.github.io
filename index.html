---
feature_name: Presentation Controller API (Google Cast)
chrome_version: 63
feature_id: 6676265876586496
---

<h3>Background</h3>

<p>
  This sample illustrates the use of
  <a href="https://w3c.github.io/presentation-api/">Presentation API</a>,
  which gives the ability to access external presentation-type displays and use
  them for presenting web content. The <code>PresentationRequest</code> object
  is associated with a request to initiate a presentation, taking a presentation URL when constructed.
  A presentation is started using the <code>start()</code> method on the <code>PresentationRequest</code> object.
</p>

<p>
  Note that this demo uses a <code>cast:</code> URL to start the presentation
  instead of the receiver page's URL. This will load the receiver page on a
  Chromecast, but the sender page won't communicate with it as Chromecast doesn't support the Presentation Receiver API.
</p>

<p>
  <button id="start">Start Presentation</button>
  <button id="close">Close Connection</button>
  <button id="terminate">Terminate Connection</button>
</p>

<div id="log"></div>

<script>
  // Helper function for logging messages
  function log(message) {
    document.getElementById('log').innerHTML += '<p>' + message + '</p>';
  }

  // Initialize PresentationRequest with Cast URL
  const presentationRequest = new PresentationRequest('secondary-screen.html');

  // Set this as the default presentation request in the browser Cast menu
  navigator.presentation.defaultRequest = presentationRequest;

  // Event listener for starting presentation
  document.querySelector('#start').addEventListener('click', async function() {
    log('Starting presentation request...');
    try {
      const connection = await presentationRequest.start();
      log('> Connected to ' + connection.url + ', id: ' + connection.id);
      
      // Store the connection for further interactions
      setupPresentationConnection(connection);
    } catch (error) {
      log('Error starting presentation: ' + error.name + ': ' + error.message);
    }
  });

  // Function to set up presentation connection
  function setupPresentationConnection(connection) {
    presentationConnection = connection;
    presentationConnection.addEventListener('close', function() {
      log('> Connection closed.');
    });
    presentationConnection.addEventListener('terminate', function() {
      log('> Connection terminated.');
    });
  }

  // Event listener for closing connection
  document.querySelector('#close').addEventListener('click', function() {
    if (presentationConnection) {
      log('Closing connection...');
      presentationConnection.close();
    } else {
      log('No active presentation connection to close.');
    }
  });

  // Event listener for terminating connection
  document.querySelector('#terminate').addEventListener('click', function() {
    if (presentationConnection) {
      log('Terminating connection...');
      presentationConnection.terminate();
    } else {
      log('No active presentation connection to terminate.');
    }
  });

  /* Availability monitoring */

  // Check and monitor availability of presentation displays
  presentationRequest.getAvailability()
    .then(availability => {
      log('Available presentation displays: ' + availability.value);
      availability.addEventListener('change', function() {
        log('> Available presentation displays: ' + availability.value);
      });
    })
    .catch(error => {
      log('Presentation availability not supported, ' + error.name + ': ' +
        error.message);
    });
</script>